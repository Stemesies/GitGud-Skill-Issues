<gigut-header></gigut-header>

<div style="display: flex;">
    
    <div class="host">
        <div class="outer-header">
            <div class="search-field-total">
                <input class="search-field-input" [(ngModel)]="searchDraft"/>
                <svg class="clear-search-field" *ngIf="this.searchDraft.trim()" (click)="searchDraft = ''; search()">
                    <path d="M2.343 13.657A8 8 0 1 1 13.658 2.343 8 8 0 0 1 2.343 13.657ZM6.03 4.97a.751.751 0 0 0-1.042.018.751.751 0 0 0-.018 1.042L6.94 8 4.97 9.97a.749.749 0 0 0 .326 1.275.749.749 0 0 0 .734-.215L8 9.06l1.97 1.97a.749.749 0 0 0 1.275-.326.749.749 0 0 0-.215-.734L9.06 8l1.97-1.97a.749.749 0 0 0-.326-1.275.749.749 0 0 0-.734.215L8 6.94Z"></path>
                </svg>
                <button class="search-button" (click)="search()">
                    <svg>
                        <path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z"></path>
                    </svg>
                </button>
            </div>

            <button class="label-button">
                <span class="label-button-image">
                    <svg>
                        <path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"></path>
                    </svg>
                </span>
                <span>
                    Labels
                </span>
            </button>
            <button class="new-issue-button" (click)="this.router.navigate(['/new'])">
                <span>New issue</span>
            </button>
        </div>

        <div class="main-panel">
            <div class="header">
                @if (selectedAll) {
                    <div class="checkbox-selected">
                        <svg style="color: #fff;"><path d="M9,16.17L4.83,12l-1.42,1.41L9,19 21,7l-1.41,-1.41z"/></svg>
                    </div>
                } @else {
                    <div class="checkbox"></div>
                }
                <button class="open-filter trans" (click)="filterStatus='open'; load()">
                    @if (filterStatus == 'open') {
                        <span style="font-weight: 700; color: #f0f6fc;">Open</span>
                    } @else {
                        <span style="color: #9198a1;">Open</span>
                    }
                    <span class="filter-counter">{{countOpenedIssues()}}</span>
                </button>
                <button class="closed-filter trans" (click)="filterStatus='closed'; load()">
                    @if (filterStatus == 'closed') {
                        <span style="font-weight: 700; color: #f0f6fc;">Closed</span>
                    } @else {
                        <span style="color: #9198a1;">Closed</span>
                    }
                    <span class="filter-counter">{{countClosedIssues()}}</span>
                </button>

                <div class="space"></div>

                <button class="trans" (click)="switchFilterDialog('author')">
                    <span class="filter-span">Author</span>
                    <svg><path d="m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"></path></svg>
                </button>
                <div style="position: relative; left: -200px;" *ngIf="this.showFilters == 'author'">
                    <div class="dialog">
                        <span class="assignee-dropdown-title">Filter by author</span>
                        <input class="search" [(ngModel)]="filterSearchField" placeholder="Filter authors" (input)="searchFilter()">
                        <div class="separator"></div>
                        <button class="trans" style="justify-content: start; width: 100%;" (click)="filterAuthor = undefined; load()">
                            <svg>
                                @if (filterAuthor == undefined) {
                                    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
                                }
                            </svg>
                            <svg style="width: 20px; height: 20px;"><path d="M10.561 8.073a6.005 6.005 0 0 1 3.432 5.142.75.75 0 1 1-1.498.07 4.5 4.5 0 0 0-8.99 0 .75.75 0 0 1-1.498-.07 6.004 6.004 0 0 1 3.431-5.142 3.999 3.999 0 1 1 5.123 0ZM10.5 5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"></path></svg>
                            <span class="assignee-name">Disable filter</span>
                        </button>
                        @for (prof of authorList; track $index) {
                            <button class="trans" style="justify-content: start; width: 100%;" (click)="filterAuthor = prof; load()">
                                <svg>
                                    @if (filterAuthor?.username == prof.username) {
                                        <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
                                    }
                                </svg>
                                <img class="pfp32" style="width: 20px; height: 20px;" src="{{prof.pfp}}">
                                <span class="assignee-name">{{prof.username}}</span>
                            </button>
                        }

                    </div>
                </div>
                <button class="trans" (click)="switchFilterDialog('labels')">
                    <span class="filter-span">Labels</span>
                    <svg><path d="m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"></path></svg>
                </button>
                <div style="position: relative; left: -200px;" *ngIf="this.showFilters == 'labels'">
                    <div class="dialog">
                        <span class="assignee-dropdown-title">Filter by label</span>
                        <input class="search" [(ngModel)]="filterSearchField" placeholder="Filter labels" (input)="searchFilter()">
                        <div class="separator"></div>
                        <!-- <button class="trans" style="justify-content: start; width: 100%;" (click)="filterLabels = undefined; load()">
                            <svg style="width: 20px; height: 20px;"><path d="M10.561 8.073a6.005 6.005 0 0 1 3.432 5.142.75.75 0 1 1-1.498.07 4.5 4.5 0 0 0-8.99 0 .75.75 0 0 1-1.498-.07 6.004 6.004 0 0 1 3.431-5.142 3.999 3.999 0 1 1 5.123 0ZM10.5 5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"></path></svg>
                            <span class="assignee-name">Disable filter</span>
                        </button> -->

                    </div>
                </div>
                <button class="trans" (click)="switchFilterDialog('assignees')">
                    <span class="filter-span">Assignees</span>
                    <svg><path d="m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"></path></svg>
                </button>
                <div style="position: relative; left: -320px;" *ngIf="this.showFilters == 'assignees'">
                    <div class="dialog">
                        <span class="assignee-dropdown-title">Filter by assignees</span>
                        <input class="search" [(ngModel)]="filterSearchField" placeholder="Filter assignees" (input)="searchFilter()">
                        <div class="separator"></div>
                        <button class="trans" style="justify-content: start; width: 100%;" (click)="filterAssignees = undefined; load()">
                            <svg>
                                @if (filterAssignees == undefined) {
                                    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
                                }
                            </svg>
                            <svg style="width: 20px; height: 20px;"><path d="M10.561 8.073a6.005 6.005 0 0 1 3.432 5.142.75.75 0 1 1-1.498.07 4.5 4.5 0 0 0-8.99 0 .75.75 0 0 1-1.498-.07 6.004 6.004 0 0 1 3.431-5.142 3.999 3.999 0 1 1 5.123 0ZM10.5 5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"></path></svg>
                            <span class="assignee-name">Disable filter</span>
                        </button>
                        @for (prof of assigneeList; track $index) {
                            <button class="trans" style="justify-content: start; width: 100%;" (click)="filterAssignees = prof; load()">
                                <svg>
                                    @if (filterAssignees?.username == prof.username) {
                                        <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
                                    }
                                </svg>
                                <img class="pfp32" style="width: 20px; height: 20px;" src="{{prof.pfp}}">
                                <span class="assignee-name">{{prof.username}}</span>
                            </button>
                        }
                        
                    </div>
                </div>
                <button class="more">
                    <svg>
                        <path d="M8 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm13 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path>
                    </svg>
                </button>
            </div>
            <issue-item *ngFor="let item of filteredIssues" [item]="item"/>
            <div class="list" *ngIf="filteredIssues.length == 0">
                <div class="no-results" *ngIf="filteredIssues.length == 0">
                    <h3 class="no-results">No results</h3>
                    <p class="no-results">Try adjusting your search filters.</p>
                </div>
            </div>
        </div>
         <button class="reset-button" (click)="reset()">
                <span>Reset</span>
            </button>
    </div>

    
</div>